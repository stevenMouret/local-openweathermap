"use strict";var _createClass=function(){function s(t,a){for(var i=0;i<a.length;i++){var s=a[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,a,i){return a&&s(t.prototype,a),i&&s(t,i),t}}();function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var Weather=function(){function R(t,a){var i=a.weatherType,s=void 0===i?"forecast":i,e=a.appid,n=void 0!==e&&e,h=a.jsonPath,o=void 0!==h&&h,r=a.lang,p=void 0===r?"en":r,l=(a.cityId,a.units),c=void 0===l?"metric":l,d=a.icoPath,g=void 0===d?"https://openweathermap.org/img/w/":d,m=a.icoFormat,u=void 0===m?"png":m,v=a.icoWidth,y=void 0===v?50:v,w=a.icoHeight,_=void 0===w?50:w,T=a.forecastDays,f=void 0===T?3:T,M=a.langTempMax,W=void 0===M?"Maximum temperature":M,b=a.langTempMin,P=void 0===b?"Minimum temperature":b,S=a.langTo,F=void 0===S?"to":S,x=a.langToday,k=void 0===x?"Today":x,D=a.langWeather,j=void 0===D?"Weather":D,A=a.langWind,H=void 0===A?"Wind":A,C=a.langMonday,I=void 0===C?"Monday":C,K=a.langTuesday,O=void 0===K?"Tuesday":K,U=a.langWednesday,q=void 0===U?"Wednesday":U,L=a.langThursday,E=void 0===L?"Thursday":L,J=a.langFriday,N=void 0===J?"Friday":J,z=a.langSaturday,B=void 0===z?"Saturday":z,G=a.langSunday,Q=void 0===G?"Sunday":G;_classCallCheck(this,R),this.weatherSelector=t,this.app=document.querySelector(this.weatherSelector),this.weatherType=void 0===this.app.dataset.weatherType?s:this.app.dataset.weatherType,this.appid=void 0===this.app.dataset.appid?n:this.app.dataset.appid,this.jsonPath=void 0===this.app.dataset.jsonPath?o:this.app.dataset.jsonPath,this.lang=void 0===this.app.dataset.lang?p:this.app.dataset.lang,this.cityId=void 0===this.app.dataset.cityId?p:this.app.dataset.cityId,this.units=void 0===this.app.dataset.units?c:this.app.dataset.units,this.icoPath=void 0===this.app.dataset.icoPath?g:this.app.dataset.icoPath,this.icoFormat=void 0===this.app.dataset.icoFormat?u:this.app.dataset.icoFormat,this.icoWidth=void 0===this.app.dataset.icoWidth?y:this.app.dataset.icoWidth,this.icoHeight=void 0===this.app.dataset.icoHeight?_:this.app.dataset.icoHeight,this.forecastDays=void 0===this.app.dataset.forecastDays?f:this.app.dataset.forecastDays,this.langTempMax=W,this.langTempMin=P,this.langTo=F,this.langToday=k,this.langWeather=j,this.langWind=H,this.langMonday=I,this.langTuesday=O,this.langWednesday=q,this.langThursday=E,this.langFriday=N,this.langSaturday=B,this.langSunday=Q,document.querySelector(this.weatherSelector)&&this.jsonPath&&self.fetch&&(this.jsonPath?this.baseApiUrl=this.jsonPath:this.appid&&(this.baseApiUrl="https://api.openweathermap.org/data/2.5/"+this.weatherType+"?id="+this.cityId+"&lang="+this.lang+"&units="+this.units+"&appid="+this.appid),this.unitsAbbr="metric"===this.units?"°C":"°F",this.getData())}return _createClass(R,[{key:"getData",value:function(){var a=this;fetch(this.baseApiUrl).then(function(t){return t.json()}).then(function(t){a.typeOfWeather(t)}).catch(function(t){console.log("The JSON file could not be found. "),console.log(t)})}},{key:"typeOfWeather",value:function(t){"weather"===this.weatherType?this.currentWeather(t):"forecast"===this.weatherType&&this.forecastWeather(t)}},{key:"convertMsToKmh",value:function(t){var a=3.6*parseFloat(t);return Math.ceil(a)}},{key:"currentWeather",value:function(t){var a=t.name,i=Math.ceil(t.main.temp_max),s=Math.ceil(t.main.temp_min),e=this.convertMsToKmh(t.wind.speed),n=t.weather[0].icon,h=t.weather[0].description,o='\n            <article>\n                <p class="weather__icon"><img src="'+this.icoPath+n+"."+this.icoFormat+'" alt="'+h+'" width="'+this.icoWidth+'" height="'+this.icoHeight+'"></p>\n                <p class="weather__temp-max"><span class="ghost">'+this.langTempMax+"</span> "+i+this.unitsAbbr+'</p>\n                <p class="weather__temp-min"><span class="ghost">'+this.langTempMin+"</span> "+s+this.unitsAbbr+'</p>\n                <p class="weather__wind"><span class="ghost">'+this.langWind+"</span> "+this.convertMsToKmh(e)+" km/h</p>\n            </article>\n        ";this.app.innerHTML='\n            <div class="weather__wrapper">\n                <h2 class="ghost">'+this.langWeather+' <span class="ghost">'+this.langTo+" "+a+'</span></h2>\n                <div class="weather__listitems">\n                    '+o+"\n                </div>\n            </div>\n        "}},{key:"forecastWeather",value:function(t){for(var a=t.city.name,i=Math.ceil(t.list[0].main.temp_max),s=Math.ceil(t.list[0].main.temp_min),e=this.convertMsToKmh(t.list[0].wind.speed),n=t.list[0].weather[0].icon,h=t.list[0].weather[0].description,o='\n            <article class="weather__item">\n                <h3 class="weather__title">'+this.langToday+'</h3>\n                <p class="weather__icon"><img src="'+this.icoPath+n+"."+this.icoFormat+'" alt="'+h+'" width="'+this.icoWidth+'" height="'+this.icoHeight+'"></p>\n                <p class="weather__temp-max"><span class="ghost">'+this.langTempMax+"</span> "+i+this.unitsAbbr+'</p>\n                <p class="weather__temp-min"><span class="ghost">'+this.langTempMin+"</span> "+s+this.unitsAbbr+'</p>\n                <p class="weather__wind"><span class="ghost">'+this.langWind+"</span> "+e+" km/h</p>\n            </article>\n        ",r=[],p=[],l=[this.langSunday,this.langMonday,this.langTuesday,this.langWednesday,this.langThursday,this.langFriday,this.langSaturday],c=l[(new Date).getDay()],d=0;d<t.list.length;d++){var g=1e3*t.list[d].dt,m=new Date(g),u=l[m.getDay()];if(13===m.getHours()&&u!==c){var v=Math.ceil(t.list[d].main.temp_max),y=Math.ceil(t.list[d].main.temp_min),w=this.convertMsToKmh(t.list[d].wind.speed),_=t.list[d].weather[0].icon,T=t.list[d].weather[0].description,f='\n                    <article class="weather__item">\n                        <h3 class="weather__title">'+u+'</h3>\n                        <p class="weather__icon"><img src="'+this.icoPath+_+"."+this.icoFormat+'" alt="'+T+'" width="'+this.icoWidth+'" height="'+this.icoHeight+'"></p>\n                        <p class="weather__temp-max"><span class="ghost">'+this.langTempMax+"</span> "+v+this.unitsAbbr+'</p>\n                        <p class="weather__temp-min"><span class="ghost">'+this.langTempMin+"</span> "+y+this.unitsAbbr+'</p>\n                        <p class="weather__wind"><span class="ghost">'+this.langWind+"</span> "+w+" km/h</p>\n                    </article>\n                ";r.push(f)}}for(var M=0;M<this.forecastDays;M++)p.push(r[M]);var W=p.join(" ");this.app.innerHTML='\n            <div class="weather__wrapper">\n                <h2 class="ghost">'+this.langWeather+' <span class="ghost">'+this.langTo+" "+a+'</span></h2>\n                <div class="weather__listitems">\n                    '+o+"\n                    "+W+"\n                </div>\n            </div>\n        "}}]),R}();